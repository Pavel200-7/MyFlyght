{% extends 'base.html.twig' %}

{% block title %}Билеты заказ{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/tickets_page.css') }}">
    <link rel="stylesheet" href="{{ asset('css/ticket_single_card.css') }}">

    <link rel="stylesheet" href="{{ asset('css/admin_pages_seat_shablon_discription.css') }}">


{% endblock %}

{% block body %}

    <script type="module">
        import { jsonConverter } from "{{ asset('js/SeatShablonScripts/jsonConverter.js') }}";
        import { seatShablonPrinter } from "{{ asset('js/SeatShablonScripts/seatShablonPrinter.js') }}";
        import { TicketsOrderList } from "{{ asset('js/ticketsOrderList/ticketsOrderList.js') }}";


        // Конверсия строки или какой-то другой веши (я не помню) в JSON, и дальше в объект js
        let seatStructureJSON = JSON.parse({{ seatStructure|json_encode|raw }});
        // console.log(seatStructureJSON);

        let jsonConverterObj = new jsonConverter();
        let seatStructureObj = jsonConverterObj.parseSeatStructure(seatStructureJSON);
        // console.log(seatStructureObj);

        // Подготовка класса - рисовальщика
        let visualDiscription = document.getElementById('visual_discription');
        let seatShablonPrinterObj = new seatShablonPrinter(visualDiscription);
        // console.log(seatStructureObj);

        let ticketsOrderListObj = new TicketsOrderList();
        // Первое отрисовывание шаблона
        seatShablonPrinterObj.updateSeatShablonVisualFromObject_client(seatStructureObj, ticketsOrderListObj);

         // ticketsOrderListObj.addTicket(111);
         // ticketsOrderListObj.addTicket(222);
         // ticketsOrderListObj.addTicket(333);
         // ticketsOrderListObj.delTicket(222);
         // ticketsOrderListObj.changeBaggageStatus(111);
         // console.log(ticketsOrderListObj);



        // let saveSubmitBTN = document.getElementById('save');
        // saveSubmitBTN.addEventListener('click', function (e) {
        //     // e.preventDefault();
        //
        //     let newSeatStructureJSON = JSON.stringify(seatStructureObj);
        //     console.log(newSeatStructureJSON);
        //     document.getElementById('seats_discription_shablon_SeatShablonJSOn').value = newSeatStructureJSON;
        //
        // });
    </script>




{#    {{ form_start(form, {'attr': {'id': 'myFormId'}} ) }}#}
{#    {{ form_label(form.SeatsDiscriptionShablonName) }}#}
{#    {{ form_widget(form.SeatsDiscriptionShablonName) }}#}

{#    {{ form_widget(form.SeatShablonJSOn, {'attr': {'style': 'display:none;'}}) }}#}


    <div class="ticket_list">
        {% for ticket in needFlightsData%}
            {{ include('tickets/ticket_single_card.html.twig', { ticket: ticket }) }}
        {% endfor %}
    </div>

    <div class="seat_shablon_window">
        <div class="tablo">
            <h1>Расположение мест в самолете</h1>
            <div STYLE="display: flex">
{#                {{ form_widget(form.ClassType) }}#}
            </div>
        </div>

        <div class="visual_discription" id="visual_discription">
            {#Визуальное отображение#}
        </div>
        {#Окно#}
    </div>
{#    {{ form_end(form) }}#}






{% endblock %}